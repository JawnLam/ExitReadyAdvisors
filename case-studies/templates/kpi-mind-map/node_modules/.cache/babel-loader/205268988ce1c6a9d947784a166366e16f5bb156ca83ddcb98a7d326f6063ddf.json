{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import*as d3 from'd3';// --- Data (can be moved to a separate file or fetched from an API) ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const sourceData={name:\"Intrinsic Enterprise Value\",type:\"center\",children:[{name:\"Obj 1: Accelerate Commercialization\",type:\"strategicObjective\",children:[{name:\"KR 1.1: Secure Anchor Customers\",type:\"tacticalKeyResult\",children:[{name:\"1.1.1: Customer Acquisition Rate\",type:\"managerialKpi\",target:\"1/quarter\"},{name:\"1.1.2: Total Contract Value\",type:\"managerialKpi\",target:\"$50M/18mo\"},{name:\"1.1.3: Sales Cycle Length\",type:\"managerialKpi\",target:\"< 6 months\"}]},{name:\"KR 1.2: Scalable Manufacturing\",type:\"tacticalKeyResult\",children:[{name:\"1.2.1: Unit Production Cost\",type:\"managerialKpi\",target:\"-30%\"},{name:\"1.2.2: Production Lead Time\",type:\"managerialKpi\",target:\"< 3 months\"},{name:\"1.2.3: First Pass Yield\",type:\"managerialKpi\",target:\"> 95%\"}]},{name:\"KR 1.3: Recurring Revenue Model\",type:\"tacticalKeyResult\",children:[{name:\"1.3.1: Annual Recurring Revenue\",type:\"managerialKpi\",target:\"+20% YoY\"},{name:\"1.3.2: Service Attachment Rate\",type:\"managerialKpi\",target:\"> 75%\"},{name:\"1.3.3: Customer Lifetime Value\",type:\"managerialKpi\",target:\"+50%\"}]}]},{name:\"Obj 2: De-Risk Technology\",type:\"strategicObjective\",children:[{name:\"KR 2.1: High Reliability\",type:\"tacticalKeyResult\",children:[{name:\"2.1.1: Mean Time Between Failures\",type:\"managerialKpi\",target:\"> 100k hrs\"},{name:\"2.1.2: Fleet-Wide Uptime\",type:\"managerialKpi\",target:\"99.99%\"},{name:\"2.1.3: Field-Service Events\",type:\"managerialKpi\",target:\"Minimize\"}]},{name:\"KR 2.2: Streamline Deployment\",type:\"tacticalKeyResult\",children:[{name:\"2.2.1: Average Deployment Time\",type:\"managerialKpi\",target:\"< 3 days\"},{name:\"2.2.2: On-Time Completion Rate\",type:\"managerialKpi\",target:\"> 95%\"},{name:\"2.2.3: Deployment CSAT Score\",type:\"managerialKpi\",target:\"4.8/5.0\"}]},{name:\"KR 2.3: Industry Certifications\",type:\"tacticalKeyResult\",children:[{name:\"2.3.1: Certification Progress\",type:\"managerialKpi\",target:\"100%\"},{name:\"2.3.2: Time to Certification\",type:\"managerialKpi\",target:\"Track\"},{name:\"2.3.3: Markets Unlocked\",type:\"managerialKpi\",target:\"Quantify\"}]}]},{name:\"Obj 3: Build Competitive Moat\",type:\"strategicObjective\",children:[{name:\"KR 3.1: Brand Leadership\",type:\"tacticalKeyResult\",children:[{name:\"3.1.1: Share of Voice\",type:\"managerialKpi\",target:\"#1\"},{name:\"3.1.2: Inbound Lead Generation\",type:\"managerialKpi\",target:\"> 40%\"},{name:\"3.1.3: Analyst Rankings\",type:\"managerialKpi\",target:\"Leader\"}]},{name:\"KR 3.2: IP Portfolio\",type:\"tacticalKeyResult\",children:[{name:\"3.2.1: New Patents Filed\",type:\"managerialKpi\",target:\"10/year\"},{name:\"3.2.2: IP Breadth Score\",type:\"managerialKpi\",target:\"+25%\"},{name:\"3.2.3: IP Encroachment Rate\",type:\"managerialKpi\",target:\"Monitor\"}]},{name:\"KR 3.3: Ecosystem Integration\",type:\"tacticalKeyResult\",children:[{name:\"3.3.1: Integration Partners\",type:\"managerialKpi\",target:\"5+\"},{name:\"3.3.2: API Adoption Rate\",type:\"managerialKpi\",target:\"Track\"},{name:\"3.3.3: Integrated Revenue %\",type:\"managerialKpi\",target:\"Measure\"}]}]},{name:\"Obj 4: Optimize Capital Strategy\",type:\"strategicObjective\",children:[{name:\"KR 4.1: Growth Capital Structure\",type:\"tacticalKeyResult\",children:[{name:\"4.1.1: Capital Runway\",type:\"managerialKpi\",target:\"> 24 months\"},{name:\"4.1.2: Cost of Capital\",type:\"managerialKpi\",target:\"Competitive\"},{name:\"4.1.3: Investor Quality\",type:\"managerialKpi\",target:\"Strategic\"}]},{name:\"KR 4.2: Working Capital Efficiency\",type:\"tacticalKeyResult\",children:[{name:\"4.2.1: Cash Conversion Cycle\",type:\"managerialKpi\",target:\"-20%\"},{name:\"4.2.2: Inventory Turns\",type:\"managerialKpi\",target:\"4x/year\"},{name:\"4.2.3: Days Sales Outstanding\",type:\"managerialKpi\",target:\"< 45 days\"}]},{name:\"KR 4.3: FP&A Function\",type:\"tacticalKeyResult\",children:[{name:\"4.3.1: Budget Variance\",type:\"managerialKpi\",target:\"< 5%\"},{name:\"4.3.2: Forecast Accuracy\",type:\"managerialKpi\",target:\"> 90%\"},{name:\"4.3.3: Time to Close\",type:\"managerialKpi\",target:\"< 5 days\"}]}]}]};// --- React Component for the D3 Mind Map ---\nconst MindMap=_ref=>{let{data,isRebalanced,onRebalanceToggle}=_ref;// useRef provides a way to access the underlying DOM element\nconst svgRef=useRef();// useRef to store static D3 structures that don't need to re-render the component\nconst d3State=useRef({});useEffect(()=>{// This effect runs once on mount to set up the D3 visualization\nconst containerEl=svgRef.current.parentElement;let width=containerEl.clientWidth;let height=containerEl.clientHeight;const transitionDuration=750;// --- D3 SETUP ---\n// Select the SVG element using the ref\nconst svg=d3.select(svgRef.current).attr(\"width\",width).attr(\"height\",height).attr(\"viewBox\",[-width/2,-height/2,width,height]);const g=svg.append(\"g\");let link=g.append(\"g\").attr(\"class\",\"links\").selectAll(\"path.link\");let node=g.append(\"g\").attr(\"class\",\"nodes\").selectAll(\".node\");// --- SCALES ---\nconst colorScale=d3.scaleOrdinal().domain([\"center\",\"strategicObjective\",\"tacticalKeyResult\",\"managerialKpi\"]).range([\"#34D399\",\"#60A5FA\",\"#FBBF24\",\"#A78BFA\"]);// --- SIMULATION ---\nconst simulation=d3.forceSimulation().force(\"link\",d3.forceLink().id(d=>d.id).distance(120).strength(0.8)).force(\"charge\",d3.forceManyBody().strength(-1500)).force(\"center\",d3.forceCenter(0,0)).force(\"collision\",d3.forceCollide().radius(d=>Math.max(d.width/2,d.height/2)+15)).on(\"tick\",ticked);// --- DATA PROCESSING & INITIAL RENDER ---\nconst root=d3.hierarchy(data);root.descendants().forEach((d,i)=>{d.id=i;d._children=d.children;if(d.depth>1)d.children=null;});// Store D3 elements and functions in the ref to access them later\nd3State.current={svg,g,link,node,simulation,root,colorScale,width,height,transitionDuration,update,rebalanceLayout,unfixAllNodes};update();// --- CORE UPDATE FUNCTION ---\nfunction update(){const nodes=root.descendants().filter(d=>d.parent?d.parent.children:true);const links=root.links().filter(d=>d.source.children&&d.target.parent.children);// Re-assign local variables from the ref for convenience\nlet{link,node,simulation,transitionDuration}=d3State.current;link=link.data(links,d=>d.target.id);link.exit().remove();link=link.enter().append(\"path\").attr(\"class\",\"link\").merge(link);node=node.data(nodes,d=>d.id);node.exit().transition().duration(transitionDuration).attr(\"transform\",d=>`translate(${d.parent.x},${d.parent.y})`).style(\"opacity\",0).remove();const nodeEnter=node.enter().append(\"g\").attr(\"class\",\"node\").attr(\"transform\",d=>`translate(${d.parent?d.parent.x:0},${d.parent?d.parent.y:0})`).style(\"opacity\",0).on(\"click\",(event,d)=>{if(event.defaultPrevented)return;toggleChildren(d);}).call(drag(simulation));nodeEnter.append(\"rect\");nodeEnter.append(\"text\").attr(\"class\",d=>`node-label ${d.data.type}-label`).attr(\"text-anchor\",\"middle\").call(wrapAndSize);nodeEnter.select(\"rect\").attr(\"width\",d=>d.width).attr(\"height\",d=>d.height).attr(\"x\",d=>-d.width/2).attr(\"y\",d=>-d.height/2).attr(\"rx\",5).attr(\"fill\",d=>colorScale(d.data.type)).attr(\"stroke\",d=>d3.color(colorScale(d.data.type)).darker(0.6));node=nodeEnter.merge(node);node.transition().duration(transitionDuration).style(\"opacity\",1);node.select('rect').transition().duration(transitionDuration).attr(\"stroke\",d=>d._children&&!d.children?\"#1f2937\":d3.color(colorScale(d.data.type)).darker(0.6)).attr(\"stroke-width\",d=>d._children&&!d.children?4:2);simulation.nodes(nodes);simulation.force(\"link\").links(links);simulation.alpha(1).restart();// Update the ref with the new selections\nd3State.current.link=link;d3State.current.node=node;}function ticked(){// Only run the tick function if not in rebalanced mode\n// isRebalanced is passed as a prop, but we access it via a closure here\nconst{isRebalanced:currentRebalanceState}=d3State.current.props;if(!currentRebalanceState){const{node,link}=d3State.current;node.attr(\"transform\",d=>`translate(${d.x},${d.y})`);link.attr(\"d\",d=>{const dx=d.target.x-d.source.x;const dy=d.target.y-d.source.y;const length=Math.sqrt(dx*dx+dy*dy);const mx=(d.source.x+d.target.x)/2;const my=(d.source.y+d.target.y)/2;const px=-dy/length;const py=dx/length;const offset=30;const cx=mx+offset*px;const cy=my+offset*py;return`M${d.source.x},${d.source.y} Q${cx},${cy} ${d.target.x},${d.target.y}`;});}}function toggleChildren(d){if(d.children){d.children=null;}else{d.children=d._children;}update();}// --- INTERACTIVITY & UTILITIES ---\nfunction drag(simulation){function dragstarted(event,d){const{isRebalanced:currentRebalanceState}=d3State.current.props;if(currentRebalanceState){onRebalanceToggle();// This will trigger a re-render and switch back to physics mode\n}if(!event.active)simulation.alphaTarget(0.3).restart();d.fx=d.x;d.fy=d.y;}function dragged(event,d){d.fx=event.x;d.fy=event.y;}function dragended(event,d){if(!event.active)simulation.alphaTarget(0);const{isRebalanced:currentRebalanceState}=d3State.current.props;if(currentRebalanceState){d.fx=event.x;d.fy=event.y;}else{d.fx=null;d.fy=null;}}return d3.drag().on(\"start\",dragstarted).on(\"drag\",dragged).on(\"end\",dragended);}const zoom=d3.zoom().scaleExtent([0.1,5]).on(\"zoom\",event=>g.attr(\"transform\",event.transform));svg.call(zoom);function handleResize(){let{width,height,svg,simulation,rebalanceLayout}=d3State.current;const{isRebalanced:currentRebalanceState}=d3State.current.props;width=containerEl.clientWidth;height=containerEl.clientHeight;svg.attr(\"viewBox\",[-width/2,-height/2,width,height]);if(currentRebalanceState){rebalanceLayout();}else{simulation.force(\"center\",d3.forceCenter(0,0)).restart();}d3State.current.width=width;d3State.current.height=height;}window.addEventListener('resize',handleResize);// --- TEXT WRAPPING & SIZING ---\nfunction wrapAndSize(selection){const PADDING=10;const LINE_HEIGHT=1.2;// ems\nconst MAX_WIDTH=200;selection.each(function(d){const textEl=d3.select(this);const words=d.data.name.split(/\\s+/);textEl.text(null);let tspan=textEl.append('tspan').attr('x',0);tspan.text(d.data.name);if(tspan.node().getComputedTextLength()>MAX_WIDTH){tspan.text('');let bestSplit=findBestSplitPoint(words);const line1=words.slice(0,bestSplit).join(' ');const line2=words.slice(bestSplit).join(' ');textEl.append('tspan').attr('x',0).text(line1);textEl.append('tspan').attr('x',0).attr('dy',`${LINE_HEIGHT}em`).text(line2);}const bbox=textEl.node().getBBox();d.width=bbox.width+PADDING*2;d.height=bbox.height+PADDING*2;textEl.attr('y',-bbox.height/2-bbox.y);});}function findBestSplitPoint(words){let bestSplit=-1;let minDiff=Infinity;for(let i=1;i<words.length;i++){const line1Length=words.slice(0,i).join(' ').length;const line2Length=words.slice(i).join(' ').length;const diff=Math.abs(line1Length-line2Length);if(diff<minDiff){minDiff=diff;bestSplit=i;}}return bestSplit;}// --- LAYOUT FUNCTIONS ---\nfunction unfixAllNodes(){const{node}=d3State.current;node.each(d=>{d.fx=null;d.fy=null;});}function rebalanceLayout(){let{simulation,svg,root,node,link,transitionDuration}=d3State.current;simulation.stop();// Stop physics temporarily\nsvg.transition().duration(transitionDuration).call(zoom.transform,d3.zoomIdentity);const allNodes=root.descendants().filter(d=>d.parent?d.parent.children:true);const centerNode=allNodes.find(d=>d.data.type==='center');if(!centerNode)return;centerNode.fx=0;centerNode.fy=0;let hasCollisions=true;let iterations=0;const maxIterations=50;let radii={1:Math.max(centerNode.width,centerNode.height)/2+120,2:Math.max(centerNode.width,centerNode.height)/2+320,3:Math.max(centerNode.width,centerNode.height)/2+520};while(hasCollisions&&iterations<maxIterations){iterations++;hasCollisions=false;const strategicObjectives=allNodes.filter(d=>d.data.type==='strategicObjective');const strategicObjectiveAngleSlice=2*Math.PI/strategicObjectives.length;strategicObjectives.forEach((strategicObj,i)=>{const strategicObjAngle=i*strategicObjectiveAngleSlice;strategicObj.fx=radii[1]*Math.cos(strategicObjAngle);strategicObj.fy=radii[1]*Math.sin(strategicObjAngle);const tacticalKeyResults=strategicObj.children?allNodes.filter(n=>n.parent===strategicObj):[];if(tacticalKeyResults.length>0){const tacticalKeyResultAngleSlice=strategicObjectiveAngleSlice/tacticalKeyResults.length;const tacticalKeyResultStartAngle=strategicObjAngle-strategicObjectiveAngleSlice/2;tacticalKeyResults.forEach((tacticalKeyResult,j)=>{const tacticalKeyResultAngle=tacticalKeyResultStartAngle+j*tacticalKeyResultAngleSlice+tacticalKeyResultAngleSlice/2;tacticalKeyResult.fx=radii[2]*Math.cos(tacticalKeyResultAngle);tacticalKeyResult.fy=radii[2]*Math.sin(tacticalKeyResultAngle);const managerialKpis=tacticalKeyResult.children?allNodes.filter(n=>n.parent===tacticalKeyResult):[];if(managerialKpis.length>0){const managerialKpiAngleSlice=tacticalKeyResultAngleSlice/managerialKpis.length;const managerialKpiStartAngle=tacticalKeyResultAngle-tacticalKeyResultAngleSlice/2;managerialKpis.forEach((managerialKpi,k)=>{const managerialKpiAngle=managerialKpiStartAngle+k*managerialKpiAngleSlice+managerialKpiAngleSlice/2;managerialKpi.fx=radii[3]*Math.cos(managerialKpiAngle);managerialKpi.fy=radii[3]*Math.sin(managerialKpiAngle);});}});}});for(let i=0;i<allNodes.length;i++){const d=allNodes[i];const r1={x1:d.fx-d.width/2,y1:d.fy-d.height/2,x2:d.fx+d.width/2,y2:d.fy+d.height/2};for(let j=i+1;j<allNodes.length;j++){const q=allNodes[j];const r2={x1:q.fx-q.width/2,y1:q.fy-q.height/2,x2:q.fx+q.width/2,y2:q.fy+q.height/2};if(r1.x1<r2.x2&&r1.x2>r2.x1&&r1.y1<r2.y2&&r1.y2>r2.y1){hasCollisions=true;break;}}if(hasCollisions)break;}if(hasCollisions){const radiusIncrement=10;radii[1]+=radiusIncrement;radii[2]+=radiusIncrement*1.5;radii[3]+=radiusIncrement*2.0;}}allNodes.forEach(d=>{d.x=d.fx;d.y=d.fy;});simulation.nodes(allNodes);simulation.alpha(0.3).restart();node.transition().duration(transitionDuration).attr(\"transform\",d=>`translate(${d.fx},${d.fy})`);const links=root.links().filter(d=>d.source.children&&d.target.parent.children);link=link.data(links,d=>d.target.id);link.transition().duration(transitionDuration).attr(\"d\",d=>{const dx=d.target.fx-d.source.fx;const dy=d.target.fy-d.source.fy;const length=Math.sqrt(dx*dx+dy*dy);const mx=(d.source.fx+d.target.fx)/2;const my=(d.source.fy+d.target.fy)/2;const px=-dy/length;const py=dx/length;const offset=30;const cx=mx+offset*px;const cy=my+offset*py;return`M${d.source.fx},${d.source.fy} Q${cx},${cy} ${d.target.fx},${d.target.fy}`;});d3State.current.link=link;}// Cleanup function for when the component unmounts\nreturn()=>{window.removeEventListener('resize',handleResize);simulation.stop();};},[data]);// The effect depends on the data prop. It will re-run if data changes.\nuseEffect(()=>{// This effect runs whenever the isRebalanced prop changes\nif(d3State.current.update){// Store the prop in the ref so the D3 closures can access the latest value\nd3State.current.props={isRebalanced};if(isRebalanced){d3State.current.rebalanceLayout();}else{d3State.current.unfixAllNodes();d3State.current.update();}}},[isRebalanced]);return/*#__PURE__*/_jsx(\"svg\",{ref:svgRef});};// --- UI Components ---\nconst Legend=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"legend absolute bottom-5 right-5 bg-white bg-opacity-70 backdrop-blur-sm p-4 rounded-lg shadow-lg text-gray-800 pointer-events-none\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-sm mb-2\",children:\"Legend\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded mr-3\",style:{background:'#34D399'}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Intrinsic Enterprise Value\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded mr-3\",style:{background:'#60A5FA'}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Strategic Objective\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded mr-3\",style:{background:'#FBBF24'}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Tactical Key Result\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded mr-3\",style:{background:'#A78BFA'}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Managerial KPI\"})]})]})]});const Controls=_ref2=>{let{isRebalanced,onToggle}=_ref2;return/*#__PURE__*/_jsx(\"button\",{onClick:onToggle,className:\"absolute bottom-5 left-5 bg-gray-200 text-gray-700 hover:bg-gray-900 hover:text-gray-100 font-bold py-2 px-4 rounded-lg shadow-lg transition-colors duration-300 border border-gray-700 hover:border-gray-100\",children:isRebalanced?'Use Physics':'Rebalance'});};// --- Main App Component ---\nexport default function App(){// State to control the layout mode of the mind map\nconst[isRebalanced,setIsRebalanced]=useState(false);const handleToggleRebalance=()=>{setIsRebalanced(prev=>!prev);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{children:`\n                body {\n                    margin: 0;\n                    padding: 0;\n                    font-family: 'Inter', sans-serif;\n                    background-color: #f3f4f6;\n                    overflow: hidden;\n                }\n                .link {\n                    fill: none;\n                    stroke: #9ca3af;\n                    stroke-opacity: 0.6;\n                    stroke-width: 1.5px;\n                }\n                .node {\n                    cursor: pointer;\n                }\n                .node rect {\n                    transition: filter 0.3s ease, stroke-width 0.3s ease, stroke 0.3s ease;\n                    stroke-width: 2px;\n                }\n                .node:hover rect {\n                    filter: brightness(1.1);\n                }\n                .node-label {\n                    font-size: 12px;\n                    fill: #1f2937;\n                    pointer-events: none;\n                    user-select: none;\n                }\n                .center-label { font-size: 16px; font-weight: 700; }\n                .strategicObjective-label { font-size: 14px; font-weight: 600; }\n                .tacticalKeyResult-label { font-size: 13px; }\n                .managerialKpi-label { font-size: 12px; }\n            `}),/*#__PURE__*/_jsxs(\"div\",{id:\"container\",className:\"w-screen h-screen relative\",children:[/*#__PURE__*/_jsx(MindMap,{data:sourceData,isRebalanced:isRebalanced,onRebalanceToggle:handleToggleRebalance}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Controls,{isRebalanced:isRebalanced,onToggle:handleToggleRebalance})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","sourceData","name","type","children","target","MindMap","_ref","data","isRebalanced","onRebalanceToggle","svgRef","d3State","containerEl","current","parentElement","width","clientWidth","height","clientHeight","transitionDuration","svg","select","attr","g","append","link","selectAll","node","colorScale","scaleOrdinal","domain","range","simulation","forceSimulation","force","forceLink","id","d","distance","strength","forceManyBody","forceCenter","forceCollide","radius","Math","max","on","ticked","root","hierarchy","descendants","forEach","i","_children","depth","update","rebalanceLayout","unfixAllNodes","nodes","filter","parent","links","source","exit","remove","enter","merge","transition","duration","x","y","style","nodeEnter","event","defaultPrevented","toggleChildren","call","drag","wrapAndSize","color","darker","alpha","restart","currentRebalanceState","props","dx","dy","length","sqrt","mx","my","px","py","offset","cx","cy","dragstarted","active","alphaTarget","fx","fy","dragged","dragended","zoom","scaleExtent","transform","handleResize","window","addEventListener","selection","PADDING","LINE_HEIGHT","MAX_WIDTH","each","textEl","words","split","text","tspan","getComputedTextLength","bestSplit","findBestSplitPoint","line1","slice","join","line2","bbox","getBBox","minDiff","Infinity","line1Length","line2Length","diff","abs","stop","zoomIdentity","allNodes","centerNode","find","hasCollisions","iterations","maxIterations","radii","strategicObjectives","strategicObjectiveAngleSlice","PI","strategicObj","strategicObjAngle","cos","sin","tacticalKeyResults","n","tacticalKeyResultAngleSlice","tacticalKeyResultStartAngle","tacticalKeyResult","j","tacticalKeyResultAngle","managerialKpis","managerialKpiAngleSlice","managerialKpiStartAngle","managerialKpi","k","managerialKpiAngle","r1","x1","y1","x2","y2","q","r2","radiusIncrement","removeEventListener","ref","Legend","className","background","Controls","_ref2","onToggle","onClick","App","setIsRebalanced","handleToggleRebalance","prev"],"sources":["/Users/jawnlam/Library/CloudStorage/Dropbox/Apps/GitHub/ExitReadyAdvisors/case-studies/templates/kpi-mind-map/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\n\n// --- Data (can be moved to a separate file or fetched from an API) ---\nconst sourceData = {\n    name: \"Intrinsic Enterprise Value\", type: \"center\",\n    children: [\n        { name: \"Obj 1: Accelerate Commercialization\", type: \"strategicObjective\", children: [\n            { name: \"KR 1.1: Secure Anchor Customers\", type: \"tacticalKeyResult\", children: [\n                { name: \"1.1.1: Customer Acquisition Rate\", type: \"managerialKpi\", target: \"1/quarter\" },\n                { name: \"1.1.2: Total Contract Value\", type: \"managerialKpi\", target: \"$50M/18mo\" },\n                { name: \"1.1.3: Sales Cycle Length\", type: \"managerialKpi\", target: \"< 6 months\" }\n            ]},\n            { name: \"KR 1.2: Scalable Manufacturing\", type: \"tacticalKeyResult\", children: [\n                { name: \"1.2.1: Unit Production Cost\", type: \"managerialKpi\", target: \"-30%\" },\n                { name: \"1.2.2: Production Lead Time\", type: \"managerialKpi\", target: \"< 3 months\" },\n                { name: \"1.2.3: First Pass Yield\", type: \"managerialKpi\", target: \"> 95%\" }\n            ]},\n            { name: \"KR 1.3: Recurring Revenue Model\", type: \"tacticalKeyResult\", children: [\n                { name: \"1.3.1: Annual Recurring Revenue\", type: \"managerialKpi\", target: \"+20% YoY\" },\n                { name: \"1.3.2: Service Attachment Rate\", type: \"managerialKpi\", target: \"> 75%\" },\n                { name: \"1.3.3: Customer Lifetime Value\", type: \"managerialKpi\", target: \"+50%\" }\n            ]}\n        ]},\n        { name: \"Obj 2: De-Risk Technology\", type: \"strategicObjective\", children: [\n            { name: \"KR 2.1: High Reliability\", type: \"tacticalKeyResult\", children: [\n                { name: \"2.1.1: Mean Time Between Failures\", type: \"managerialKpi\", target: \"> 100k hrs\" },\n                { name: \"2.1.2: Fleet-Wide Uptime\", type: \"managerialKpi\", target: \"99.99%\" },\n                { name: \"2.1.3: Field-Service Events\", type: \"managerialKpi\", target: \"Minimize\" }\n            ]},\n            { name: \"KR 2.2: Streamline Deployment\", type: \"tacticalKeyResult\", children: [\n                { name: \"2.2.1: Average Deployment Time\", type: \"managerialKpi\", target: \"< 3 days\" },\n                { name: \"2.2.2: On-Time Completion Rate\", type: \"managerialKpi\", target: \"> 95%\" },\n                { name: \"2.2.3: Deployment CSAT Score\", type: \"managerialKpi\", target: \"4.8/5.0\" }\n            ]},\n            { name: \"KR 2.3: Industry Certifications\", type: \"tacticalKeyResult\", children: [\n                { name: \"2.3.1: Certification Progress\", type: \"managerialKpi\", target: \"100%\" },\n                { name: \"2.3.2: Time to Certification\", type: \"managerialKpi\", target: \"Track\" },\n                { name: \"2.3.3: Markets Unlocked\", type: \"managerialKpi\", target: \"Quantify\" }\n            ]}\n        ]},\n        { name: \"Obj 3: Build Competitive Moat\", type: \"strategicObjective\", children: [\n            { name: \"KR 3.1: Brand Leadership\", type: \"tacticalKeyResult\", children: [\n                { name: \"3.1.1: Share of Voice\", type: \"managerialKpi\", target: \"#1\" },\n                { name: \"3.1.2: Inbound Lead Generation\", type: \"managerialKpi\", target: \"> 40%\" },\n                { name: \"3.1.3: Analyst Rankings\", type: \"managerialKpi\", target: \"Leader\" }\n            ]},\n            { name: \"KR 3.2: IP Portfolio\", type: \"tacticalKeyResult\", children: [\n                { name: \"3.2.1: New Patents Filed\", type: \"managerialKpi\", target: \"10/year\" },\n                { name: \"3.2.2: IP Breadth Score\", type: \"managerialKpi\", target: \"+25%\" },\n                { name: \"3.2.3: IP Encroachment Rate\", type: \"managerialKpi\", target: \"Monitor\" }\n            ]},\n            { name: \"KR 3.3: Ecosystem Integration\", type: \"tacticalKeyResult\", children: [\n                { name: \"3.3.1: Integration Partners\", type: \"managerialKpi\", target: \"5+\" },\n                { name: \"3.3.2: API Adoption Rate\", type: \"managerialKpi\", target: \"Track\" },\n                { name: \"3.3.3: Integrated Revenue %\", type: \"managerialKpi\", target: \"Measure\" }\n            ]}\n        ]},\n        { name: \"Obj 4: Optimize Capital Strategy\", type: \"strategicObjective\", children: [\n            { name: \"KR 4.1: Growth Capital Structure\", type: \"tacticalKeyResult\", children: [\n                { name: \"4.1.1: Capital Runway\", type: \"managerialKpi\", target: \"> 24 months\" },\n                { name: \"4.1.2: Cost of Capital\", type: \"managerialKpi\", target: \"Competitive\" },\n                { name: \"4.1.3: Investor Quality\", type: \"managerialKpi\", target: \"Strategic\" }\n            ]},\n            { name: \"KR 4.2: Working Capital Efficiency\", type: \"tacticalKeyResult\", children: [\n                { name: \"4.2.1: Cash Conversion Cycle\", type: \"managerialKpi\", target: \"-20%\" },\n                { name: \"4.2.2: Inventory Turns\", type: \"managerialKpi\", target: \"4x/year\" },\n                { name: \"4.2.3: Days Sales Outstanding\", type: \"managerialKpi\", target: \"< 45 days\" }\n            ]},\n            { name: \"KR 4.3: FP&A Function\", type: \"tacticalKeyResult\", children: [\n                { name: \"4.3.1: Budget Variance\", type: \"managerialKpi\", target: \"< 5%\" },\n                { name: \"4.3.2: Forecast Accuracy\", type: \"managerialKpi\", target: \"> 90%\" },\n                { name: \"4.3.3: Time to Close\", type: \"managerialKpi\", target: \"< 5 days\" }\n            ]}\n        ]}\n    ]\n};\n\n\n// --- React Component for the D3 Mind Map ---\nconst MindMap = ({ data, isRebalanced, onRebalanceToggle }) => {\n    // useRef provides a way to access the underlying DOM element\n    const svgRef = useRef();\n    // useRef to store static D3 structures that don't need to re-render the component\n    const d3State = useRef({});\n\n    useEffect(() => {\n        // This effect runs once on mount to set up the D3 visualization\n        const containerEl = svgRef.current.parentElement;\n        let width = containerEl.clientWidth;\n        let height = containerEl.clientHeight;\n        const transitionDuration = 750;\n\n        // --- D3 SETUP ---\n        // Select the SVG element using the ref\n        const svg = d3.select(svgRef.current)\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\n\n        const g = svg.append(\"g\");\n        let link = g.append(\"g\").attr(\"class\", \"links\").selectAll(\"path.link\");\n        let node = g.append(\"g\").attr(\"class\", \"nodes\").selectAll(\".node\");\n\n        // --- SCALES ---\n        const colorScale = d3.scaleOrdinal()\n            .domain([\"center\", \"strategicObjective\", \"tacticalKeyResult\", \"managerialKpi\"])\n            .range([\"#34D399\", \"#60A5FA\", \"#FBBF24\", \"#A78BFA\"]);\n\n        // --- SIMULATION ---\n        const simulation = d3.forceSimulation()\n            .force(\"link\", d3.forceLink().id(d => d.id).distance(120).strength(0.8))\n            .force(\"charge\", d3.forceManyBody().strength(-1500))\n            .force(\"center\", d3.forceCenter(0, 0))\n            .force(\"collision\", d3.forceCollide().radius(d => Math.max(d.width / 2, d.height / 2) + 15))\n            .on(\"tick\", ticked);\n\n        // --- DATA PROCESSING & INITIAL RENDER ---\n        const root = d3.hierarchy(data);\n        root.descendants().forEach((d, i) => {\n            d.id = i;\n            d._children = d.children;\n            if (d.depth > 1) d.children = null;\n        });\n\n        // Store D3 elements and functions in the ref to access them later\n        d3State.current = {\n            svg, g, link, node, simulation, root, colorScale,\n            width, height, transitionDuration,\n            update, rebalanceLayout, unfixAllNodes\n        };\n\n        update();\n\n        // --- CORE UPDATE FUNCTION ---\n        function update() {\n            const nodes = root.descendants().filter(d => d.parent ? d.parent.children : true);\n            const links = root.links().filter(d => d.source.children && d.target.parent.children);\n            \n            // Re-assign local variables from the ref for convenience\n            let { link, node, simulation, transitionDuration } = d3State.current;\n\n            link = link.data(links, d => d.target.id);\n            link.exit().remove();\n            link = link.enter().append(\"path\").attr(\"class\", \"link\").merge(link);\n\n            node = node.data(nodes, d => d.id);\n            node.exit().transition().duration(transitionDuration)\n                .attr(\"transform\", d => `translate(${d.parent.x},${d.parent.y})`)\n                .style(\"opacity\", 0)\n                .remove();\n            \n            const nodeEnter = node.enter().append(\"g\")\n                .attr(\"class\", \"node\")\n                .attr(\"transform\", d => `translate(${d.parent ? d.parent.x : 0},${d.parent ? d.parent.y : 0})`)\n                .style(\"opacity\", 0)\n                .on(\"click\", (event, d) => {\n                    if (event.defaultPrevented) return;\n                    toggleChildren(d);\n                })\n                .call(drag(simulation));\n\n            nodeEnter.append(\"rect\");\n            nodeEnter.append(\"text\")\n                .attr(\"class\", d => `node-label ${d.data.type}-label`)\n                .attr(\"text-anchor\", \"middle\")\n                .call(wrapAndSize);\n            \n            nodeEnter.select(\"rect\")\n                .attr(\"width\", d => d.width)\n                .attr(\"height\", d => d.height)\n                .attr(\"x\", d => -d.width / 2)\n                .attr(\"y\", d => -d.height / 2)\n                .attr(\"rx\", 5)\n                .attr(\"fill\", d => colorScale(d.data.type))\n                .attr(\"stroke\", d => d3.color(colorScale(d.data.type)).darker(0.6));\n\n            node = nodeEnter.merge(node);\n            \n            node.transition().duration(transitionDuration).style(\"opacity\", 1);\n            \n            node.select('rect')\n                .transition().duration(transitionDuration)\n                .attr(\"stroke\", d => (d._children && !d.children) ? \"#1f2937\" : d3.color(colorScale(d.data.type)).darker(0.6))\n                .attr(\"stroke-width\", d => (d._children && !d.children) ? 4 : 2);\n            \n            simulation.nodes(nodes);\n            simulation.force(\"link\").links(links);\n            simulation.alpha(1).restart();\n\n            // Update the ref with the new selections\n            d3State.current.link = link;\n            d3State.current.node = node;\n        }\n\n        function ticked() {\n            // Only run the tick function if not in rebalanced mode\n            // isRebalanced is passed as a prop, but we access it via a closure here\n            const { isRebalanced: currentRebalanceState } = d3State.current.props;\n            if (!currentRebalanceState) {\n                 const { node, link } = d3State.current;\n                node.attr(\"transform\", d => `translate(${d.x},${d.y})`);\n                link.attr(\"d\", d => {\n                    const dx = d.target.x - d.source.x;\n                    const dy = d.target.y - d.source.y;\n                    const length = Math.sqrt(dx * dx + dy * dy);\n                    const mx = (d.source.x + d.target.x) / 2;\n                    const my = (d.source.y + d.target.y) / 2;\n                    const px = -dy / length;\n                    const py = dx / length;\n                    const offset = 30; \n                    const cx = mx + offset * px;\n                    const cy = my + offset * py;\n                    return `M${d.source.x},${d.source.y} Q${cx},${cy} ${d.target.x},${d.target.y}`;\n                });\n            }\n        }\n\n        function toggleChildren(d) {\n            if (d.children) {\n                d.children = null;\n            } else {\n                d.children = d._children;\n            }\n            update();\n        }\n\n        // --- INTERACTIVITY & UTILITIES ---\n        function drag(simulation) {\n            function dragstarted(event, d) {\n                const { isRebalanced: currentRebalanceState } = d3State.current.props;\n                if (currentRebalanceState) {\n                    onRebalanceToggle(); // This will trigger a re-render and switch back to physics mode\n                }\n                if (!event.active) simulation.alphaTarget(0.3).restart();\n                d.fx = d.x;\n                d.fy = d.y;\n            }\n            function dragged(event, d) {\n                d.fx = event.x;\n                d.fy = event.y;\n            }\n            function dragended(event, d) {\n                if (!event.active) simulation.alphaTarget(0);\n                const { isRebalanced: currentRebalanceState } = d3State.current.props;\n                if (currentRebalanceState) {\n                    d.fx = event.x;\n                    d.fy = event.y;\n                } else {\n                    d.fx = null;\n                    d.fy = null;\n                }\n            }\n            return d3.drag()\n                .on(\"start\", dragstarted)\n                .on(\"drag\", dragged)\n                .on(\"end\", dragended);\n        }\n\n        const zoom = d3.zoom().scaleExtent([0.1, 5]).on(\"zoom\", (event) => g.attr(\"transform\", event.transform));\n        svg.call(zoom);\n\n        function handleResize() {\n            let { width, height, svg, simulation, rebalanceLayout } = d3State.current;\n            const { isRebalanced: currentRebalanceState } = d3State.current.props;\n\n            width = containerEl.clientWidth;\n            height = containerEl.clientHeight;\n            svg.attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\n            if (currentRebalanceState) {\n                rebalanceLayout();\n            } else {\n                simulation.force(\"center\", d3.forceCenter(0, 0)).restart();\n            }\n            d3State.current.width = width;\n            d3State.current.height = height;\n        }\n        window.addEventListener('resize', handleResize);\n\n        // --- TEXT WRAPPING & SIZING ---\n        function wrapAndSize(selection) {\n            const PADDING = 10;\n            const LINE_HEIGHT = 1.2; // ems\n            const MAX_WIDTH = 200;\n\n            selection.each(function(d) {\n                const textEl = d3.select(this);\n                const words = d.data.name.split(/\\s+/);\n                \n                textEl.text(null);\n\n                let tspan = textEl.append('tspan').attr('x', 0);\n                tspan.text(d.data.name);\n\n                if (tspan.node().getComputedTextLength() > MAX_WIDTH) {\n                    tspan.text('');\n                    let bestSplit = findBestSplitPoint(words);\n                    const line1 = words.slice(0, bestSplit).join(' ');\n                    const line2 = words.slice(bestSplit).join(' ');\n\n                    textEl.append('tspan').attr('x', 0).text(line1);\n                    textEl.append('tspan').attr('x', 0).attr('dy', `${LINE_HEIGHT}em`).text(line2);\n                }\n\n                const bbox = textEl.node().getBBox();\n                d.width = bbox.width + PADDING * 2;\n                d.height = bbox.height + PADDING * 2;\n\n                textEl.attr('y', -bbox.height / 2 - bbox.y);\n            });\n        }\n        \n        function findBestSplitPoint(words) {\n            let bestSplit = -1;\n            let minDiff = Infinity;\n            for (let i = 1; i < words.length; i++) {\n                const line1Length = words.slice(0, i).join(' ').length;\n                const line2Length = words.slice(i).join(' ').length;\n                const diff = Math.abs(line1Length - line2Length);\n                if (diff < minDiff) {\n                    minDiff = diff;\n                    bestSplit = i;\n                }\n            }\n            return bestSplit;\n        }\n\n        // --- LAYOUT FUNCTIONS ---\n        function unfixAllNodes() {\n            const { node } = d3State.current;\n            node.each(d => {\n                d.fx = null;\n                d.fy = null;\n            });\n        }\n\n        function rebalanceLayout() {\n            let { simulation, svg, root, node, link, transitionDuration } = d3State.current;\n\n            simulation.stop(); // Stop physics temporarily\n            svg.transition().duration(transitionDuration).call(zoom.transform, d3.zoomIdentity);\n\n            const allNodes = root.descendants().filter(d => d.parent ? d.parent.children : true);\n            const centerNode = allNodes.find(d => d.data.type === 'center');\n            if (!centerNode) return;\n\n            centerNode.fx = 0;\n            centerNode.fy = 0;\n\n            let hasCollisions = true;\n            let iterations = 0;\n            const maxIterations = 50; \n            \n            let radii = {\n                1: Math.max(centerNode.width, centerNode.height) / 2 + 120,\n                2: Math.max(centerNode.width, centerNode.height) / 2 + 320,\n                3: Math.max(centerNode.width, centerNode.height) / 2 + 520\n            };\n\n            while (hasCollisions && iterations < maxIterations) {\n                iterations++;\n                hasCollisions = false;\n\n                const strategicObjectives = allNodes.filter(d => d.data.type === 'strategicObjective');\n                const strategicObjectiveAngleSlice = (2 * Math.PI) / strategicObjectives.length;\n\n                strategicObjectives.forEach((strategicObj, i) => {\n                    const strategicObjAngle = i * strategicObjectiveAngleSlice;\n                    strategicObj.fx = radii[1] * Math.cos(strategicObjAngle);\n                    strategicObj.fy = radii[1] * Math.sin(strategicObjAngle);\n\n                    const tacticalKeyResults = strategicObj.children ? allNodes.filter(n => n.parent === strategicObj) : [];\n                    if (tacticalKeyResults.length > 0) {\n                        const tacticalKeyResultAngleSlice = strategicObjectiveAngleSlice / tacticalKeyResults.length;\n                        const tacticalKeyResultStartAngle = strategicObjAngle - (strategicObjectiveAngleSlice / 2);\n\n                        tacticalKeyResults.forEach((tacticalKeyResult, j) => {\n                            const tacticalKeyResultAngle = tacticalKeyResultStartAngle + (j * tacticalKeyResultAngleSlice) + (tacticalKeyResultAngleSlice / 2);\n                            tacticalKeyResult.fx = radii[2] * Math.cos(tacticalKeyResultAngle);\n                            tacticalKeyResult.fy = radii[2] * Math.sin(tacticalKeyResultAngle);\n\n                            const managerialKpis = tacticalKeyResult.children ? allNodes.filter(n => n.parent === tacticalKeyResult) : [];\n                            if (managerialKpis.length > 0) {\n                                const managerialKpiAngleSlice = tacticalKeyResultAngleSlice / managerialKpis.length;\n                                const managerialKpiStartAngle = tacticalKeyResultAngle - (tacticalKeyResultAngleSlice / 2);\n\n                                managerialKpis.forEach((managerialKpi, k) => {\n                                    const managerialKpiAngle = managerialKpiStartAngle + (k * managerialKpiAngleSlice) + (managerialKpiAngleSlice / 2);\n                                    managerialKpi.fx = radii[3] * Math.cos(managerialKpiAngle);\n                                    managerialKpi.fy = radii[3] * Math.sin(managerialKpiAngle);\n                                });\n                            }\n                        });\n                    }\n                });\n\n                for (let i = 0; i < allNodes.length; i++) {\n                    const d = allNodes[i];\n                    const r1 = { x1: d.fx - d.width/2, y1: d.fy - d.height/2, x2: d.fx + d.width/2, y2: d.fy + d.height/2 };\n                    for (let j = i + 1; j < allNodes.length; j++) {\n                        const q = allNodes[j];\n                        const r2 = { x1: q.fx - q.width/2, y1: q.fy - q.height/2, x2: q.fx + q.width/2, y2: q.fy + q.height/2 };\n                        if (r1.x1 < r2.x2 && r1.x2 > r2.x1 && r1.y1 < r2.y2 && r1.y2 > r2.y1) {\n                            hasCollisions = true;\n                            break; \n                        }\n                    }\n                    if (hasCollisions) break;\n                }\n\n                if (hasCollisions) {\n                    const radiusIncrement = 10;\n                    radii[1] += radiusIncrement;\n                    radii[2] += radiusIncrement * 1.5;\n                    radii[3] += radiusIncrement * 2.0;\n                }\n            }\n            \n            allNodes.forEach(d => {\n                d.x = d.fx;\n                d.y = d.fy;\n            });\n            simulation.nodes(allNodes);\n            simulation.alpha(0.3).restart();\n\n            node.transition().duration(transitionDuration)\n                .attr(\"transform\", d => `translate(${d.fx},${d.fy})`);\n                \n            const links = root.links().filter(d => d.source.children && d.target.parent.children);\n            link = link.data(links, d => d.target.id);\n            link.transition().duration(transitionDuration)\n                .attr(\"d\", d => {\n                    const dx = d.target.fx - d.source.fx;\n                    const dy = d.target.fy - d.source.fy;\n                    const length = Math.sqrt(dx * dx + dy * dy);\n                    const mx = (d.source.fx + d.target.fx) / 2;\n                    const my = (d.source.fy + d.target.fy) / 2;\n                    const px = -dy / length;\n                    const py = dx / length;\n                    const offset = 30; \n                    const cx = mx + offset * px;\n                    const cy = my + offset * py;\n                    return `M${d.source.fx},${d.source.fy} Q${cx},${cy} ${d.target.fx},${d.target.fy}`;\n                });\n             d3State.current.link = link;\n        }\n\n        // Cleanup function for when the component unmounts\n        return () => {\n            window.removeEventListener('resize', handleResize);\n            simulation.stop();\n        };\n    }, [data]); // The effect depends on the data prop. It will re-run if data changes.\n\n    useEffect(() => {\n        // This effect runs whenever the isRebalanced prop changes\n        if (d3State.current.update) {\n            // Store the prop in the ref so the D3 closures can access the latest value\n            d3State.current.props = { isRebalanced };\n\n            if (isRebalanced) {\n                d3State.current.rebalanceLayout();\n            } else {\n                d3State.current.unfixAllNodes();\n                d3State.current.update();\n            }\n        }\n    }, [isRebalanced]);\n\n    return <svg ref={svgRef}></svg>;\n};\n\n// --- UI Components ---\n\nconst Legend = () => (\n    <div className=\"legend absolute bottom-5 right-5 bg-white bg-opacity-70 backdrop-blur-sm p-4 rounded-lg shadow-lg text-gray-800 pointer-events-none\">\n        <h4 className=\"font-bold text-sm mb-2\">Legend</h4>\n        <div className=\"space-y-2\">\n            <div className=\"flex items-center\">\n                <div className=\"w-4 h-4 rounded mr-3\" style={{ background: '#34D399' }}></div><span className=\"text-xs\">Intrinsic Enterprise Value</span>\n            </div>\n            <div className=\"flex items-center\">\n                <div className=\"w-4 h-4 rounded mr-3\" style={{ background: '#60A5FA' }}></div><span className=\"text-xs\">Strategic Objective</span>\n            </div>\n            <div className=\"flex items-center\">\n                <div className=\"w-4 h-4 rounded mr-3\" style={{ background: '#FBBF24' }}></div><span className=\"text-xs\">Tactical Key Result</span>\n            </div>\n            <div className=\"flex items-center\">\n                <div className=\"w-4 h-4 rounded mr-3\" style={{ background: '#A78BFA' }}></div><span className=\"text-xs\">Managerial KPI</span>\n            </div>\n        </div>\n    </div>\n);\n\nconst Controls = ({ isRebalanced, onToggle }) => (\n    <button\n        onClick={onToggle}\n        className=\"absolute bottom-5 left-5 bg-gray-200 text-gray-700 hover:bg-gray-900 hover:text-gray-100 font-bold py-2 px-4 rounded-lg shadow-lg transition-colors duration-300 border border-gray-700 hover:border-gray-100\"\n    >\n        {isRebalanced ? 'Use Physics' : 'Rebalance'}\n    </button>\n);\n\n\n// --- Main App Component ---\nexport default function App() {\n    // State to control the layout mode of the mind map\n    const [isRebalanced, setIsRebalanced] = useState(false);\n\n    const handleToggleRebalance = () => {\n        setIsRebalanced(prev => !prev);\n    };\n\n    return (\n        <>\n            {/* These styles are the same as the original HTML file */}\n            <style>{`\n                body {\n                    margin: 0;\n                    padding: 0;\n                    font-family: 'Inter', sans-serif;\n                    background-color: #f3f4f6;\n                    overflow: hidden;\n                }\n                .link {\n                    fill: none;\n                    stroke: #9ca3af;\n                    stroke-opacity: 0.6;\n                    stroke-width: 1.5px;\n                }\n                .node {\n                    cursor: pointer;\n                }\n                .node rect {\n                    transition: filter 0.3s ease, stroke-width 0.3s ease, stroke 0.3s ease;\n                    stroke-width: 2px;\n                }\n                .node:hover rect {\n                    filter: brightness(1.1);\n                }\n                .node-label {\n                    font-size: 12px;\n                    fill: #1f2937;\n                    pointer-events: none;\n                    user-select: none;\n                }\n                .center-label { font-size: 16px; font-weight: 700; }\n                .strategicObjective-label { font-size: 14px; font-weight: 600; }\n                .tacticalKeyResult-label { font-size: 13px; }\n                .managerialKpi-label { font-size: 12px; }\n            `}</style>\n\n            <div id=\"container\" className=\"w-screen h-screen relative\">\n                <MindMap \n                    data={sourceData} \n                    isRebalanced={isRebalanced} \n                    onRebalanceToggle={handleToggleRebalance} \n                />\n                <Legend />\n                <Controls isRebalanced={isRebalanced} onToggle={handleToggleRebalance} />\n            </div>\n        </>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}