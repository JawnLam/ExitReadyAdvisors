<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Income Statement</title>
    
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- html2pdf.js for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <!-- marked.js for Markdown to HTML conversion -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>

    <style>
        /* Custom styles for printing and fine-tuning */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .no-print {
                display: none;
            }
        }
        /* Ensure table content doesn't break weirdly in the PDF */
        table {
            page-break-inside: auto;
        }
        tr {
            page-break-inside: avoid;
            page-break-after: auto;
        }
        thead {
            display: table-header-group;
        }
        tbody {
            display: table-row-group;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-4 sm:p-8 flex flex-col items-center">
    <!-- Controls section with the download button -->
<!--
    <div class="controls w-full max-w-7xl mb-6 flex justify-end no-print">
        <button id="download-pdf" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ease-in-out flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
            <span>Download PDF</span>
        </button>
    </div>
-->

    <!-- This div contains the content that will be rendered and converted to PDF -->
    <div id="pdf-content" class="w-full max-w-7xl bg-white p-6 sm:p-10 rounded-xl shadow-lg">
        <div id="rendered-markdown"></div>
    </div>

    <!-- This hidden div holds the raw markdown content -->
    <div id="markdown-source" style="display:none;">
<!--Nothing above this should be modified by the AI or LLM. Below this point is the beginning of where the AI or LLM should populate the details of the financial statement, giving special attention to the place holders in the H1 and H2 headers below.-->
# Income Statement for Johnson & Sons Heating, Plumbing, & Air
## **As of December 31, 2024**<br>

| Account Description | 2024 Amount ($) | % of Revenue | 2023 Comparative ($) |
| :--- | :--- | :--- | :--- |
| **CONTRACT REVENUE** | | | |
| *Revenue by Service Line* | | | |
| ● HVAC Installation & Service | 41,310,000 | 60.0% | 39,120,000 |
| ● ● New Construction - HVAC | 37,179,000 | 54.0% | 35,208,000 |
| ● ● Service & Maintenance - HVAC | 4,131,000 | 6.0% | 3,912,000 |
| ● Plumbing Installation & Service | 27,540,000 | 40.0% | 26,080,000 |
| ● ● New Construction - Plumbing | 25,318,000 | 36.8% | 23,984,000 |
| ● ● Service & Maintenance - Plumbing | 2,222,000 | 3.2% | 2,096,000 |
| *Revenue by Geography* | | | |
| ● Arizona Operations (Phoenix) | 34,425,000 | 50.0% | 32,600,000 |
| ● Utah Operations (Salt Lake City) | 20,655,000 | 30.0% | 19,560,000 |
| ● Colorado Operations (Denver) | 13,770,000 | 20.0% | 13,040,000 |
| *Revenue by Customer Type* | | | |
| ● Commercial (Office, Retail) | 27,540,000 | 40.0% | 26,080,000 |
| ● Multifamily Residential | 20,655,000 | 30.0% | 19,560,000 |
| ● Industrial | 10,327,500 | 15.0% | 9,780,000 |
| ● Institutional (Healthcare, Education) | 10,327,500 | 15.0% | 9,780,000 |
| **TOTAL CONTRACT REVENUE** | **68,850,000** | **100.0%** | **65,200,000** |
| | | | |
| **COST OF CONTRACT REVENUE** | | | |
| *Direct Materials* | | | |
| ● HVAC Equipment & Materials | 16,937,100 | 24.6% | 15,648,000 |
| ● Plumbing Materials & Fixtures | 11,291,400 | 16.4% | 10,432,000 |
| **Total Direct Materials** | **28,228,500** | **41.0%** | **26,080,000** |
| *Direct Labor* | | | |
| ● Field Technician Wages | 7,573,500 | 11.0% | 7,172,000 |
| ● ● Union Labor (60% of field) | 4,544,100 | 6.6% | 4,303,200 |
| ● ● Non-Union Labor (40% of field) | 3,029,400 | 4.4% | 2,868,800 |
| ● Field Labor Burden | 2,754,000 | 4.0% | 2,608,000 |
| ● ● Payroll Taxes & Workers Comp | 1,652,400 | 2.4% | 1,564,800 |
| ● ● Union Benefits & Pension | 826,200 | 1.2% | 782,400 |
| ● ● Field Insurance & Safety | 275,400 | 0.4% | 260,800 |
| **Total Direct Labor** | **10,327,500** | **15.0%** | **9,780,000** |
| *Subcontractor Costs* | | | |
| ● Specialty Subcontractors | 9,914,400 | 14.4% | 9,360,000 |
| ● ● Controls & Automation | 4,131,000 | 6.0% | 3,900,000 |
| ● ● Insulation & Sheet Metal | 3,304,800 | 4.8% | 3,120,000 |
| ● ● Testing & Balancing | 2,478,600 | 3.6% | 2,340,000 |
| ● General Subcontractors | 6,609,600 | 9.6% | 6,240,000 |
| **Total Subcontractor Costs** | **16,524,000** | **24.0%** | **15,600,000** |
| *Other Direct Costs* | | | |
| ● Equipment Rental & Small Tools | 1,377,000 | 2.0% | 1,304,000 |
| ● Job Site Supplies & Consumables | 688,500 | 1.0% | 652,000 |
| ● Freight & Delivery | 550,800 | 0.8% | 521,600 |
| ● Warranty & Callbacks Reserve | 413,100 | 0.6% | 391,200 |
| ● Project Bonding & Insurance | 275,400 | 0.4% | 260,800 |
| **Total Other Direct Costs** | **3,304,800** | **4.8%** | **3,129,600** |
| **TOTAL COST OF CONTRACT REVENUE** | **58,385,300** | **84.8%** | **54,589,600** |
| | | | |
| **GROSS PROFIT** | **10,464,700** | **15.2%** | **10,610,400** |
| ● *Reclassification Adjustment** | 3,305,300 | 4.8% | 3,089,600 |
| **ADJUSTED GROSS PROFIT** | **13,770,000** | **20.0%** | **13,700,000** |
| | | | |
| **OPERATING EXPENSES** | | | |
| *Compensation & Benefits* | | | |
| ● Executive Management (5 persons) | 1,550,000 | 2.3% | 1,475,000 |
| ● ● Owner/Presidents (2) | 600,000 | 0.9% | 575,000 |
| ● ● General Manager | 350,000 | 0.5% | 335,000 |
| ● ● Regional Project Executives (3) | 600,000 | 0.9% | 565,000 |
| ● Middle Management (8 persons) | 800,000 | 1.2% | 760,000 |
| ● Project Management Staff (12 persons) | 750,000 | 1.1% | 710,000 |
| ● Administrative Staff (10 persons) | 500,000 | 0.7% | 475,000 |
| ● Estimating & Engineering (5 persons) | 400,000 | 0.6% | 380,000 |
| ● Employee Benefits & Burden | 750,000 | 1.1% | 710,000 |
| **Total Compensation & Benefits** | **4,750,000** | **6.9%** | **4,510,000** |
| *Facility & Equipment* | | | |
| ● Depreciation - Buildings & Improvements | 250,000 | 0.4% | 250,000 |
| ● Depreciation - Vehicles & Equipment | 600,000 | 0.9% | 580,000 |
| ● Facility Operating Costs | 450,000 | 0.7% | 425,000 |
| ● ● Phoenix Facility (40,000 sq ft) | 225,000 | 0.3% | 212,500 |
| ● ● Salt Lake City Facility (20,000 sq ft) | 135,000 | 0.2% | 127,500 |
| ● ● Denver Facility (15,000 sq ft) | 90,000 | 0.1% | 85,000 |
| ● Vehicle Fleet Expenses | 350,000 | 0.5% | 330,000 |
| **Total Facility & Equipment** | **1,650,000** | **2.4%** | **1,585,000** |
| *Insurance & Risk Management* | | | |
| ● General Liability Insurance | 480,000 | 0.7% | 456,000 |
| ● Professional Liability (E&O) | 240,000 | 0.3% | 228,000 |
| ● Auto/Fleet Insurance | 180,000 | 0.3% | 171,000 |
| ● Umbrella Policy | 150,000 | 0.2% | 142,500 |
| ● Directors & Officers | 150,000 | 0.2% | 142,500 |
| **Total Insurance & Risk** | **1,200,000** | **1.7%** | **1,140,000** |
| *Professional & Administrative* | | | |
| ● Technology & Software | 320,000 | 0.5% | 304,000 |
| ● ● Project Management Software | 120,000 | 0.2% | 114,000 |
| ● ● Accounting & ERP Systems | 80,000 | 0.1% | 76,000 |
| ● ● Other Software & IT | 120,000 | 0.2% | 114,000 |
| ● Professional Services | 280,000 | 0.4% | 266,000 |
| ● ● Legal Fees | 100,000 | 0.1% | 95,000 |
| ● ● Accounting & Tax | 120,000 | 0.2% | 114,000 |
| ● ● Other Professional | 60,000 | 0.1% | 57,000 |
| ● Licenses & Permits | 150,000 | 0.2% | 142,500 |
| ● Office & Administrative | 220,000 | 0.3% | 209,000 |
| ● Travel & Entertainment | 180,000 | 0.3% | 171,000 |
| ● Marketing & Business Development | 90,000 | 0.1% | 85,500 |
| ● Training & Education | 100,000 | 0.1% | 95,000 |
| ● Bad Debt Expense | 140,000 | 0.2% | 130,400 |
| ● Other Operating Expenses | 250,000 | 0.4% | 237,500 |
| **Total Professional & Administrative** | **1,460,000** | **2.1%** | **1,385,400** |
| **TOTAL OPERATING EXPENSES** | **9,060,000** | **13.2%** | **8,620,400** |
| | | | |
| **EBITDA (Earnings Before Interest, Tax, Depreciation & Amortization)** | **5,560,000** | **8.1%** | **5,659,600** |
| | | | |
| **ADJUSTMENTS FOR ADJUSTED EBITDA** | | | |
| ● Owner Compensation Normalization | 1,200,000 | 1.7% | 1,150,000 |
| ● One-time M&A Advisory Fees | 450,000 | 0.7% | - |
| ● Non-recurring Legal Settlements | 380,000 | 0.6% | - |
| ● Owner Personal Expenses | 350,000 | 0.5% | 340,000 |
| ● Excess Facility Rent (Related Party) | 300,000 | 0.4% | 290,000 |
| ● Non-arms Length Transactions | 300,000 | 0.4% | 285,000 |
| **Total Normalization Adjustments** | **2,980,000** | **4.3%** | **2,065,000** |
| | | | |
| **ADJUSTED EBITDA** | **8,540,000** | **12.4%** | **7,724,600** |
| | | | |
| ● Depreciation & Amortization | (850,000) | (1.2%) | (830,000) |
| **ADJUSTED EBIT** | **7,690,000** | **11.2%** | **6,894,600** |
| | | | |
| **OTHER INCOME (EXPENSES)** | | | |
| ● Interest Expense - Line of Credit | (275,000) | (0.4%) | (245,000) |
| ● Interest Expense - Equipment Loans | (112,500) | (0.2%) | (120,000) |
| ● Interest Expense - Mortgages | (72,500) | (0.1%) | (75,000) |
| ● Other Income | - | 0.0% | 15,000 |
| **Total Other Expenses** | **(460,000)** | **(0.7%)** | **(425,000)** |
| | | | |
| **INCOME BEFORE INCOME TAXES** | **7,230,000** | **10.5%** | **6,469,600** |
| | | | |
| **INCOME TAX PROVISION** | | | |
| ● Federal Income Tax (S-Corp @ 21%) | 1,518,300 | 2.2% | 1,358,616 |
| ● State Income Tax - Multi-State | 561,700 | 0.8% | 502,404 |
| ● ● Arizona (5.05%) | 182,508 | 0.3% | 163,278 |
| ● ● Utah (4.65%) | 201,116 | 0.3% | 179,886 |
| ● ● Colorado (4.40%) | 178,076 | 0.3% | 159,240 |
| **Total Income Tax Expense** | **2,080,000** | **3.0%** | **1,861,020** |
| | | | |
| **NET INCOME** | **5,150,000** | **7.5%** | **4,608,580** |


<!--This is the end of where the AI or LLM should populate the details of the financial statement. Nothing below this should be modified by the AI or LLM.-->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- 1. Render Markdown to HTML ---
            const markdownSource = document.getElementById('markdown-source').textContent;
            const renderedMarkdownContainer = document.getElementById('rendered-markdown');
            
            // Use marked.js to parse the markdown content
            renderedMarkdownContainer.innerHTML = marked.parse ? marked.parse(markdownSource) : marked(markdownSource);

            // --- 2. Apply Tailwind CSS classes to the generated content ---
            function applyStyling() {
                const container = document.getElementById('rendered-markdown');
                if (!container) return;

                // Style Headers
                // REMOVED text-center to make headers left-aligned
                container.querySelectorAll('h1').forEach(el => el.classList.add('text-3xl', 'sm:text-4xl', 'font-bold', 'text-gray-900', 'pb-4', 'mb-2', 'border-b-2', 'border-gray-200'));
                container.querySelectorAll('h2').forEach(el => {
                    // REMOVED text-center to make headers left-aligned
                    el.classList.add('text-lg', 'font-normal', 'text-gray-500', 'mt-0', 'mb-8');
                });
                container.querySelectorAll('h3').forEach(el => el.classList.add('text-xl', 'font-semibold', 'text-gray-700', 'mt-8', 'mb-4'));

                // Style Tables
                container.querySelectorAll('table').forEach(table => {
                    // ADDED font-mono to make the entire table monospaced
                    table.classList.add('min-w-full', 'divide-y', 'divide-gray-300', 'mt-6', 'mb-8', 'border', 'border-gray-200', 'rounded-lg', 'shadow-sm', 'overflow-hidden', 'font-mono');
                    const thead = table.querySelector('thead');
                    if (thead) {
                        thead.classList.add('bg-gray-50');
                    }
                    table.querySelectorAll('th').forEach(th => {
                        // ADDED whitespace-nowrap to prevent headers from wrapping
                        th.classList.add('px-4', 'py-3', 'sm:px-6', 'sm:py-3.5', 'text-left', 'text-sm', 'font-semibold', 'text-gray-900', 'whitespace-nowrap');
                    });
                    table.querySelectorAll('tbody tr:nth-child(odd)').forEach(row => {
                        row.classList.add('bg-white'); // Use white for odd rows
                    });
                     table.querySelectorAll('tbody tr:nth-child(even)').forEach(row => {
                        row.classList.add('bg-gray-50'); // Use light gray for even rows for zebra striping
                    });
                    table.querySelectorAll('td').forEach(td => {
                        td.classList.add('px-4', 'py-3', 'sm:px-6', 'sm:py-4', 'text-sm', 'text-gray-600');
                        // Make bold text inside tables stand out more
                        td.querySelectorAll('strong').forEach(strong => strong.classList.add('font-bold', 'text-gray-800'));
                    });
                    
                    // Right-align numeric-heavy columns
                    table.querySelectorAll('tr').forEach(row => {
                        // Target all but the first column for right alignment
                        row.querySelectorAll('td:not(:first-child), th:not(:first-child)').forEach(cell => {
                            cell.classList.add('text-right');
                        });
                    });
                });

                // Style Paragraphs, Lists, and other elements
                container.querySelectorAll('p').forEach(el => el.classList.add('mb-4', 'leading-relaxed', 'text-gray-700'));
                container.querySelectorAll('ul').forEach(el => el.classList.add('list-disc', 'list-inside', 'mb-4', 'pl-4', 'text-gray-700', 'space-y-2'));
                container.querySelectorAll('strong').forEach(el => el.classList.add('font-semibold', 'text-gray-800'));
                container.querySelectorAll('hr').forEach(el => el.classList.add('my-10', 'border-t', 'border-gray-200'));
            }
            
            applyStyling();

            // --- 3. Setup PDF Download Button ---
            // NOTE: Download button is commented out in the HTML, but the logic remains.
            const downloadButton = document.getElementById('download-pdf');
            if(downloadButton) {
                downloadButton.addEventListener('click', () => {
                    const element = document.getElementById('pdf-content');
                    
                    // --- Generate Dynamic Filename ---
                    const h1Element = document.querySelector('#rendered-markdown h1');
                    let filename = 'financial-statement.pdf'; // fallback
                    
                    if (h1Element) {
                        const h1Text = h1Element.textContent.toLowerCase();
                        let statementType = '';
                        let businessName = 'name-of-business';
                        const parts = h1Text.split(' for ');
                        if (parts.length >= 2) {
                            statementType = parts[0].trim();
                            businessName = parts[1].trim();
                        } else {
                            statementType = h1Text.trim();
                        }
                        businessName = businessName.replace(/&/g, 'and').replace(/[^a-z0-9]/g, ' ').replace(/\s+/g, '-');
                        const statementMap = {
                            'adjusted trial balance': '1-adjusted-trial-balance',
                            'income statement': '2-income-statement',
                            'statement of shareholders equity': '3-statement-of-shareholders-equity',
                            'statement of shareholder equity': '3-statement-of-shareholders-equity',
                            'shareholders equity': '3-statement-of-shareholders-equity',
                            'balance sheet': '4-balance-sheet',
                            'statement of cash flows': '5-statement-of-cash-flows',
                            'cash flow statement': '5-statement-of-cash-flows',
                            'closing disclosures': '6-closing-disclosures'
                        };
                        let mappedStatement = '';
                        for (const [key, value] of Object.entries(statementMap)) {
                            if (statementType.includes(key)) {
                                mappedStatement = value;
                                break;
                            }
                        }
                        if (mappedStatement) {
                            filename = `${mappedStatement}-${businessName}.pdf`;
                        } else {
                            const cleanStatement = statementType.replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-');
                            filename = `${cleanStatement}-${businessName}.pdf`;
                        }
                    }
                    
                    // --- Configuration for html2pdf.js ---
                    const opt = {
                        margin:       [0.5, 0.25, 0.5, 0.25], // top, left, bottom, right in inches
                        filename:     filename,
                        image:        { type: 'jpeg', quality: 0.98 },
                        html2canvas:  { scale: 2, useCORS: true, letterRendering: true },
                        jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
                    };

                    // --- Generate and save the PDF ---
                    html2pdf().set(opt).from(element).save();
                });
            }
        });
    </script>

</body>
</html>
